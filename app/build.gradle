apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-android-extensions'
apply plugin: 'kotlin-kapt'

android {
    compileSdkVersion 26
    buildToolsVersion "26.0.1"

    defaultConfig {
        applicationId "work.beltran.discogsbrowser"
        minSdkVersion 21
        targetSdkVersion 26
        versionCode 1002
        versionName "1.2"

        // For OAuth
        def consumerSecret = project.hasProperty('discogsConsumerSecret') ? discogsConsumerSecret : (System.getenv('API_CONSUMER_SECRET') ?: '""')
        buildConfigField "String", "API_CONSUMER_SECRET", consumerSecret
        def consumerKey = project.hasProperty('discogsConsumerKey') ? discogsConsumerKey : (System.getenv('API_CONSUMER_KEY') ?: '""')
        buildConfigField "String", "API_CONSUMER_KEY", consumerKey
        def apikey = project.hasProperty('apikey') ? apikey : (System.getenv('API_KEY') ?: '""')
        buildConfigField "String", "API_KEY", apikey
    }

    buildTypes {
        release {
            // Common release options
            zipAlignEnabled true
            debuggable false
            jniDebuggable false

            minifyEnabled false // Disabled by the moment
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
    lintOptions {
        lintConfig rootProject.file('app/lint.xml')
    }
    testOptions {
        unitTests.returnDefaultValues = true
    }
}


repositories {
    maven {
        url 'https://oss.sonatype.org/content/repositories/snapshots/'
    }
}

ext {
    supportLibVersion = '26.0.0'
    daggerLV = '2.7'
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile project(path: ':data-repository')
    compile project(path: ':data-room')
    compile project(path: ':domain')

    testCompile "junit:junit:$junit_version"
    testCompile "org.mockito:mockito-core:$mockito_version"
    testCompile "org.assertj:assertj-core:$assertj_version"

    compile "org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version"

    // Support Lib
    compile "com.android.support:appcompat-v7:${supportLibVersion}"
    compile "com.android.support:design:${supportLibVersion}"
    compile "com.android.support:cardview-v7:${supportLibVersion}"
    compile "com.android.support:recyclerview-v7:${supportLibVersion}"
    compile "com.android.support:support-v4:${supportLibVersion}"

    // Dagger
    compile "com.google.dagger:dagger:${daggerLV}"
    kapt "com.google.dagger:dagger-compiler:${daggerLV}"

    compile 'com.eyeem.recyclerviewtools:library:0.4.0'
    compile 'com.squareup.picasso:picasso:2.5.2'
    compile 'com.aurelhubert:ahbottomnavigation:1.1.8'

    compile 'com.google.zxing:android-integration:3.3.0'

    compile 'com.jakewharton:butterknife:8.8.1'
    annotationProcessor 'com.jakewharton:butterknife-compiler:8.8.1'

    compile 'com.bluelinelabs:conductor:2.1.4'
    compile 'com.bluelinelabs:conductor-support:2.1.4'

    compile 'io.reactivex.rxjava2:rxandroid:2.0.1'
}

android.defaultConfig.vectorDrawables.useSupportLibrary = true
